<!DOCTYPE html>
<html class="h-full bg-[#d1e7dd]">
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="~/css/styles.css" asp-append-version="true" />
    <title>@ViewData["Title"] - NehuenOrganico</title>

</head>

<body class="h-full">
     <header >
               <partial name="_LoginPartial"/> 
    </header> 

    <div>
        @RenderBody()
    </div>

     <script>
        document.addEventListener("DOMContentLoaded", function () {
            var userMenuButton = document.getElementById("user-menu-button");
            var userMenu = document.getElementById("user-menu");

            var mobileMenuButton = document.getElementById("mobile-menu-button");
            var mobileMenu = document.getElementById("mobile-menu");

            if (userMenuButton && userMenu && mobileMenuButton && mobileMenu) {
                userMenuButton.addEventListener("click", function () {
                    console.log("User Menu Clicked");
                    userMenu.classList.toggle("hidden");
                });

                mobileMenuButton.addEventListener("click", function () {
                    console.log("Mobile Menu Clicked");
                    mobileMenu.classList.toggle("hidden");
                });
            }
        });
    </script> 
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var cartCountElement = document.getElementById('cartItemCount');
            if (cartCountElement) {
                fetch('/item/ItemCount')
                    .then(response => {
                        if (response.ok) {
                            return response.json();
                        } else {
                            return response.text().then(text => { throw new Error(text); });
                        }
                    })
                    .then(data => {
                        console.log('Cantidad de artículos:', data); // Agrega un console log para depurar
                        cartCountElement.innerText = data;
                    })
                    .catch(error => {
                        console.error('Error al obtener el conteo de artículos del carrito:', error);
                    });
            } else {
                console.error('Elemento con ID "cartItemCount" no encontrado.');
            }
        });
    </script>

     @await RenderSectionAsync("Scripts", required: false) 
</body>
</html>